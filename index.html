<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>インフルエンザ予防接種予約フォーム</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <main class="container">
    <h1>インフルエンザ予防接種予約フォーム</h1>

    <p class="notice">
      ※ 一度登録された方で変更がある場合、こちらのフォームでは修正できません。<br />
      恐れ入りますが、<strong>管理本部 総務</strong>までご連絡をお願いします。
    </p>

    <details class="mode">
      <summary>動作モード / データの扱いについて</summary>
      <p>このフォームは <strong>GitHub Pages（サーバーレス）</strong> で動作する想定です。既定では端末のローカル保存（LocalStorage）を用います。
      社内全体で重複チェック・一元管理を行う場合は、SharePoint リストや Google フォーム等のバックエンドと接続してください（下記「外部連携設定」参照）。</p>
    </details>

    <form id="reservation-form" autocomplete="off">
      <div class="field">
        <label for="employeeId">1. 社員番号 <span class="req">必須</span></label>
        <input id="employeeId" name="employeeId" type="text" inputmode="numeric" pattern="[0-9/]+"
               placeholder="例）123 / 250901" required />
        <small class="hint">半角数字（「/」可）。重複登録はできません。</small>
      </div>

      <div class="field">
        <label for="department">2. 部署名 <span class="req">必須</span></label>
        <select id="department" name="department" required></select>
      </div>

      <div class="field">
        <label for="fullName">3. お名前 <span class="req">必須</span></label>
        <input id="fullName" name="fullName" type="text" placeholder="例）西川 太郎" required />
      </div>

      <div class="field">
        <label for="choice">4. 接種する／しない <span class="req">必須</span></label>
        <select id="choice" name="choice" required>
          <option value="">選択してください</option>
          <option value="接種する">接種する</option>
          <option value="接種しない">接種しない</option>
        </select>
      </div>

      <div class="actions">
        <button type="submit" class="primary">登録する</button>
        <button type="button" id="exportCsvBtn" class="ghost">CSVをエクスポート</button>
      </div>
    </form>

    <section class="importer">
      <h2>既存データの取り込み（任意）</h2>
      <p>過去エクスポートした CSV を読み込むと、<strong>重複チェック対象</strong>に加えられます（社内共有PCなどでご利用ください）。</p>
      <input type="file" id="csvFile" accept=".csv" />
    </section>

    <section>
      <h2>登録済み一覧（この端末）</h2>
      <div class="table-wrap">
        <table id="list">
          <thead>
            <tr>
              <th>社員番号</th>
              <th>部署名</th>
              <th>お名前</th>
              <th>接種</th>
              <th>登録日時</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <footer>
      <details>
        <summary>外部連携設定（上級者向け・任意）</summary>
        <p>app.js の <code>CONFIG</code> に Webhook（Power Automate / GAS / 任意のAPI）を設定すると、
           登録内容をPOSTできます。POST成功後もローカル保存と重複チェックは継続します。</p>
      </details>
      <p class="copy">&copy; Nishikawa Printing Group</p>
    </footer>
  </main>

  <script src="./app.js"></script>
</body>
</html>
